{"ast":null,"code":"import _asyncToGenerator from \"/home/hmnd/code/poetryslam/web-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ignoreFocus as s, focusable as t, focusElement as o } from \"../utils/focus.js\";\nimport { listenForAttributeChange as i } from \"../utils/events.js\";\nimport { getFlattenedDOMTree as c } from \"../utils/traversal.js\";\n\nfunction h(s = {\n  fallback: \"focusable\"\n}) {\n  return t => t.addInitializer(t => new e(t, s));\n}\n\nclass e {\n  constructor(s, t = {\n    fallback: \"focusable\"\n  }) {\n    this.host = s, this.config = t, this.host.addController(this);\n  }\n\n  hostConnected() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.host.updateComplete, _this.observer = i(_this.host, \"hidden\", () => _this.cdsFocusFirst()), _this.cdsFocusFirst();\n    })();\n  }\n\n  hostDisconnected() {\n    this.observer?.disconnect();\n  }\n\n  cdsFocusFirst() {\n    if (!s(this.host)) {\n      const s = this.host.shadowRoot ? this.host.shadowRoot : this.host,\n            i = s.querySelector(\".private-host\") ?? this.host,\n            h = c(s).filter(s => !s.hasAttribute(\"cds-focus-boundary\")),\n            e = h.find(s => s.hasAttribute(\"cds-first-focus\")),\n            r = \"focusable\" === this.config.fallback ? h.find(s => t(s) && !s.classList.contains(\"private-host\")) : null,\n            a = \"none\" === this.config.fallback ? null : i,\n            n = e ?? r ?? a;\n      n && o(n);\n    }\n  }\n\n}\n\nexport { e as FirstFocusController, h as firstFocus };","map":{"version":3,"sources":["/home/hmnd/code/poetryslam/web-app/node_modules/@cds/core/internal/controllers/first-focus.controller.js"],"names":["ignoreFocus","s","focusable","t","focusElement","o","listenForAttributeChange","i","getFlattenedDOMTree","c","h","fallback","addInitializer","e","constructor","host","config","addController","hostConnected","updateComplete","observer","cdsFocusFirst","hostDisconnected","disconnect","shadowRoot","querySelector","filter","hasAttribute","find","r","classList","contains","a","n","FirstFocusController","firstFocus"],"mappings":";AAAA,SAAOA,WAAW,IAAIC,CAAtB,EAAwBC,SAAS,IAAIC,CAArC,EAAuCC,YAAY,IAAIC,CAAvD,QAA6D,mBAA7D;AAAiF,SAAOC,wBAAwB,IAAIC,CAAnC,QAAyC,oBAAzC;AAA8D,SAAOC,mBAAmB,IAAIC,CAA9B,QAAoC,uBAApC;;AAA4D,SAASC,CAAT,CAAWT,CAAC,GAAC;AAACU,EAAAA,QAAQ,EAAC;AAAV,CAAb,EAAoC;AAAC,SAAOR,CAAC,IAAEA,CAAC,CAACS,cAAF,CAAkBT,CAAC,IAAE,IAAIU,CAAJ,CAAMV,CAAN,EAAQF,CAAR,CAArB,CAAV;AAA4C;;AAAA,MAAMY,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACb,CAAD,EAAGE,CAAC,GAAC;AAACQ,IAAAA,QAAQ,EAAC;AAAV,GAAL,EAA4B;AAAC,SAAKI,IAAL,GAAUd,CAAV,EAAY,KAAKe,MAAL,GAAYb,CAAxB,EAA0B,KAAKY,IAAL,CAAUE,aAAV,CAAwB,IAAxB,CAA1B;AAAwD;;AAAMC,EAAAA,aAAa,GAAE;AAAA;;AAAA;AAAC,YAAM,KAAI,CAACH,IAAL,CAAUI,cAAhB,EAA+B,KAAI,CAACC,QAAL,GAAcb,CAAC,CAAC,KAAI,CAACQ,IAAN,EAAW,QAAX,EAAqB,MAAI,KAAI,CAACM,aAAL,EAAzB,CAA9C,EAA8F,KAAI,CAACA,aAAL,EAA9F;AAAD;AAAoH;;AAAAC,EAAAA,gBAAgB,GAAE;AAAC,SAAKF,QAAL,EAAeG,UAAf;AAA4B;;AAAAF,EAAAA,aAAa,GAAE;AAAC,QAAG,CAACpB,CAAC,CAAC,KAAKc,IAAN,CAAL,EAAiB;AAAC,YAAMd,CAAC,GAAC,KAAKc,IAAL,CAAUS,UAAV,GAAqB,KAAKT,IAAL,CAAUS,UAA/B,GAA0C,KAAKT,IAAvD;AAAA,YAA4DR,CAAC,GAACN,CAAC,CAACwB,aAAF,CAAgB,eAAhB,KAAkC,KAAKV,IAArG;AAAA,YAA0GL,CAAC,GAACD,CAAC,CAACR,CAAD,CAAD,CAAKyB,MAAL,CAAazB,CAAC,IAAE,CAACA,CAAC,CAAC0B,YAAF,CAAe,oBAAf,CAAjB,CAA5G;AAAA,YAAoKd,CAAC,GAACH,CAAC,CAACkB,IAAF,CAAQ3B,CAAC,IAAEA,CAAC,CAAC0B,YAAF,CAAe,iBAAf,CAAX,CAAtK;AAAA,YAAqNE,CAAC,GAAC,gBAAc,KAAKb,MAAL,CAAYL,QAA1B,GAAmCD,CAAC,CAACkB,IAAF,CAAQ3B,CAAC,IAAEE,CAAC,CAACF,CAAD,CAAD,IAAM,CAACA,CAAC,CAAC6B,SAAF,CAAYC,QAAZ,CAAqB,cAArB,CAAlB,CAAnC,GAA4F,IAAnT;AAAA,YAAwTC,CAAC,GAAC,WAAS,KAAKhB,MAAL,CAAYL,QAArB,GAA8B,IAA9B,GAAmCJ,CAA7V;AAAA,YAA+V0B,CAAC,GAACpB,CAAC,IAAEgB,CAAH,IAAMG,CAAvW;AAAyWC,MAAAA,CAAC,IAAE5B,CAAC,CAAC4B,CAAD,CAAJ;AAAQ;AAAC;;AAA7qB;;AAA8qB,SAAOpB,CAAC,IAAIqB,oBAAZ,EAAiCxB,CAAC,IAAIyB,UAAtC","sourcesContent":["import{ignoreFocus as s,focusable as t,focusElement as o}from\"../utils/focus.js\";import{listenForAttributeChange as i}from\"../utils/events.js\";import{getFlattenedDOMTree as c}from\"../utils/traversal.js\";function h(s={fallback:\"focusable\"}){return t=>t.addInitializer((t=>new e(t,s)))}class e{constructor(s,t={fallback:\"focusable\"}){this.host=s,this.config=t,this.host.addController(this)}async hostConnected(){await this.host.updateComplete,this.observer=i(this.host,\"hidden\",(()=>this.cdsFocusFirst())),this.cdsFocusFirst()}hostDisconnected(){this.observer?.disconnect()}cdsFocusFirst(){if(!s(this.host)){const s=this.host.shadowRoot?this.host.shadowRoot:this.host,i=s.querySelector(\".private-host\")??this.host,h=c(s).filter((s=>!s.hasAttribute(\"cds-focus-boundary\"))),e=h.find((s=>s.hasAttribute(\"cds-first-focus\"))),r=\"focusable\"===this.config.fallback?h.find((s=>t(s)&&!s.classList.contains(\"private-host\"))):null,a=\"none\"===this.config.fallback?null:i,n=e??r??a;n&&o(n)}}}export{e as FirstFocusController,h as firstFocus};\n"]},"metadata":{},"sourceType":"module"}