{"ast":null,"code":"import _asyncToGenerator from \"/home/hmnd/code/poetryslam/web-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getOffesetDifference as t } from \"../utils/math.js\";\n\nfunction e() {\n  return t => t.addInitializer(t => new s(t));\n}\n\nclass s {\n  constructor(t) {\n    this.host = t, this.moveHandler = this.move.bind(this), this.endHandler = this.end.bind(this), this.host.addController(this);\n  }\n\n  hostConnected() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.host.updateComplete, _this.host.addEventListener(\"pointerdown\", t => _this.start(t), {\n        passive: !0\n      });\n    })();\n  }\n\n  start(t) {\n    t.path.find(t => t === this.host) && (this.startPosition = {\n      x: t.clientX,\n      y: t.clientY\n    }, document.addEventListener(\"pointerup\", this.endHandler, {\n      passive: !0\n    }), document.addEventListener(\"pointermove\", this.moveHandler, {\n      passive: !0\n    }), this.host.dispatchEvent(new CustomEvent(\"cdsTouchStart\", {\n      detail: { ...this.startPosition\n      }\n    })));\n  }\n\n  end(t) {\n    if (this.startPosition) {\n      const e = this.getCoordinates(t);\n      document.removeEventListener(\"pointerup\", this.endHandler, !1), document.removeEventListener(\"pointermove\", this.moveHandler, !1), this.host.dispatchEvent(new CustomEvent(\"cdsTouchEnd\", {\n        detail: e\n      }));\n    }\n  }\n\n  move(t) {\n    requestAnimationFrame(() => {\n      const e = this.getCoordinates(t);\n      this.startPosition = {\n        x: t.clientX,\n        y: t.clientY\n      }, this.host.dispatchEvent(new CustomEvent(\"cdsTouchMove\", {\n        detail: e\n      }));\n    });\n  }\n\n  getCoordinates(e) {\n    return {\n      x: e.clientX,\n      y: e.clientY,\n      offsetX: t(this.startPosition.x, e.clientX),\n      offsetY: t(this.startPosition.y, e.clientY)\n    };\n  }\n\n}\n\nexport { s as TouchController, e as touch };","map":{"version":3,"sources":["/home/hmnd/code/poetryslam/web-app/node_modules/@cds/core/internal/controllers/touch.controller.js"],"names":["getOffesetDifference","t","e","addInitializer","s","constructor","host","moveHandler","move","bind","endHandler","end","addController","hostConnected","updateComplete","addEventListener","start","passive","path","find","startPosition","x","clientX","y","clientY","document","dispatchEvent","CustomEvent","detail","getCoordinates","removeEventListener","requestAnimationFrame","offsetX","offsetY","TouchController","touch"],"mappings":"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","sourcesContent":["import{getOffesetDifference as t}from\"../utils/math.js\";function e(){return t=>t.addInitializer((t=>new s(t)))}class s{constructor(t){this.host=t,this.moveHandler=this.move.bind(this),this.endHandler=this.end.bind(this),this.host.addController(this)}async hostConnected(){await this.host.updateComplete,this.host.addEventListener(\"pointerdown\",(t=>this.start(t)),{passive:!0})}start(t){t.path.find((t=>t===this.host))&&(this.startPosition={x:t.clientX,y:t.clientY},document.addEventListener(\"pointerup\",this.endHandler,{passive:!0}),document.addEventListener(\"pointermove\",this.moveHandler,{passive:!0}),this.host.dispatchEvent(new CustomEvent(\"cdsTouchStart\",{detail:{...this.startPosition}})))}end(t){if(this.startPosition){const e=this.getCoordinates(t);document.removeEventListener(\"pointerup\",this.endHandler,!1),document.removeEventListener(\"pointermove\",this.moveHandler,!1),this.host.dispatchEvent(new CustomEvent(\"cdsTouchEnd\",{detail:e}))}}move(t){requestAnimationFrame((()=>{const e=this.getCoordinates(t);this.startPosition={x:t.clientX,y:t.clientY},this.host.dispatchEvent(new CustomEvent(\"cdsTouchMove\",{detail:e}))}))}getCoordinates(e){return{x:e.clientX,y:e.clientY,offsetX:t(this.startPosition.x,e.clientX),offsetY:t(this.startPosition.y,e.clientY)}}}export{s as TouchController,e as touch};\n"]},"metadata":{},"sourceType":"module"}