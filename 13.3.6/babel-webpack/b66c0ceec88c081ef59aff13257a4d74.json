{"ast":null,"code":"import _asyncToGenerator from \"/home/hmnd/code/poetryslam/web-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX as t, AnimationStatus as n, CLARITY_MOTION_REVERSE_ANIMATION_LABEL as o, CLARITY_MOTION_FALLBACK_EASING as i, CLARITY_MOTION_FALLBACK_DURATION_IN_MS as r, CLARITY_MOTION_ENTER_LEAVE_PROPERTY as e } from \"./interfaces.js\";\nimport { LogService as s } from \"../services/log.service.js\";\nimport { ClarityMotion as a } from \"./motion.service.js\";\nimport u from \"ramda/es/clone.js\";\nimport { isCssPropertyName as c, getCssPropertyValue as f } from \"../utils/css.js\";\nimport { isSuffixedBy as m, getNumericValueFromCssSecondsStyleValue as l, isPrefixedBy as p, removePrefix as h } from \"../utils/string.js\";\nimport { queryChildFromLightOrShadowDom as g } from \"../utils/dom.js\";\nimport { allPropertiesPass as d } from \"../utils/identity.js\";\nimport { getMillisecondsFromSeconds as y } from \"../utils/math.js\";\n\nfunction j(_x, _x2) {\n  return _j.apply(this, arguments);\n}\n\nfunction _j() {\n  _j = _asyncToGenerator(function* (t, n) {\n    if (!n._animations) return s.warn(n.tagName.toLocaleLowerCase() + \" is trying to animate but no animations are defined.\"), !1;\n    const o = z(n._animations, t);\n    return yield Promise.all(o.map(o => {\n      const [i, r] = o;\n      if (t.get(i) === n[i]) return !1;\n      const e = r[n[i].toString()],\n            s = n.cdsMotion,\n            [a, c] = M(e, x(s, i, n[i].toString()));\n      let f = u(c);\n      if (f.length < 1) return !1;\n      f = O(a, f, n);\n      const m = b(e, f, n);\n      return Promise.all(m).then(() => (v(e, n), !0));\n    })).then(t => t.indexOf(!0) > -1).catch(() => !1);\n  });\n  return _j.apply(this, arguments);\n}\n\nfunction w(t, o) {\n  o.getAttribute(\"_cds-animation-status\") !== n.active && (o.setAttribute(\"_cds-animation-status\", n.active), o.cdsMotionChange.emit(`${t} animation ${n.start}`));\n}\n\nfunction v(t, o) {\n  o.setAttribute(\"_cds-animation-status\", n.ready), o.cdsMotionChange.emit(`${t} animation ${n.end}`);\n}\n\nfunction O(t, n, o) {\n  const i = o.cdsMotion,\n        r = !i || \"off\" === i;\n  return S(t) && (n = C(n)), r ? B(n) : $(n = N(n, o), o);\n}\n\nfunction b(t, n, o) {\n  return n.filter(t => !t.onlyIf || d(o, t.onlyIf)).map(n => (w(t, o), new Promise(t => {\n    const i = A(o, n.target).animate(P(n.animation, o), n.options || {}),\n          r = () => {\n      t(\"animation finished\"), i.removeEventListener(\"finish\", r);\n    };\n\n    i.addEventListener(\"finish\", r);\n  })));\n}\n\nfunction A(t, n) {\n  return g(t, n) || t;\n}\n\nfunction P(t, n) {\n  return Array.isArray(t) ? R(t, n) : t;\n}\n\nfunction S(n) {\n  return m(n, t);\n}\n\nfunction C(t) {\n  return t.map(t => (t.options ? t.options.direction = o : t.options = {\n    direction: o\n  }, t));\n}\n\nfunction _(t) {\n  return t + \"-\" + o;\n}\n\nfunction x(t, n, o) {\n  if (!t || !n || void 0 === o) return \"\";\n  if (\"on\" === t || \"off\" === t) return \"\";\n  let i;\n\n  try {\n    i = JSON.parse(t);\n  } catch (t) {\n    return \"\";\n  }\n\n  return i[n] && i[n][o] || \"\";\n}\n\nfunction E(n) {\n  return S(n) ? n.slice(0, -1 * t.length) : n;\n}\n\nfunction L(t, n) {\n  return n && a.has(E(n)) ? n : t;\n}\n\nfunction M(t, n) {\n  const o = L(t, n);\n  return [o, u(a.get(E(o)))];\n}\n\nfunction N(t, n) {\n  return I(\"duration\", n, t, r, t => y(l(t)));\n}\n\nfunction $(t, n) {\n  return I(\"easing\", n, t, i);\n}\n\nfunction B(t) {\n  return t.map(t => (t.options ? (t.options.duration = 0, t.options.easing = i) : t.options = {\n    duration: 0,\n    easing: i\n  }, t));\n}\n\nfunction I(t, n, o, i, r) {\n  return o.map(o => {\n    if (o.options) {\n      if (o.options[t]) {\n        if (c(o.options[t])) {\n          const e = o.options[t];\n          let s = f(e, n);\n          s ? r && (s = r(s)) : s = i, o.options[t] = s;\n        }\n      } else o.options[t] = i;\n    } else {\n      const n = {};\n      n[t] = i, o.options = n;\n    }\n    return o;\n  });\n}\n\nfunction R(t, n) {\n  return Array.isArray(t) ? t.map(t => {\n    if (Object.prototype.hasOwnProperty.call(t, \"height\") && p(t?.height?.toString() || \"\", \"from:\")) {\n      const o = h(t?.height?.toString() || \"\", \"from:\"),\n            i = g(n, o) || null;\n      t.height = i ? i.getBoundingClientRect().height + \"px\" : \"auto\";\n    }\n\n    if (Object.prototype.hasOwnProperty.call(t, \"width\") && p(t?.width?.toString() || \"\", \"from:\")) {\n      const o = h(t?.width?.toString() || \"\", \"from:\"),\n            i = g(n, o) || null;\n      t.width = i ? i.getBoundingClientRect().width + \"px\" : \"auto\";\n    }\n\n    return t;\n  }) : t;\n}\n\nfunction J(t, n) {\n  if (null == t) return null;\n  let o = !0;\n  const i = {};\n  return Object.getOwnPropertyNames(t).forEach(r => {\n    n.has(r) && void 0 !== n.get(r) && (i[r] = u(t[r]), o = !1);\n  }), o ? null : i;\n}\n\nfunction k(t, n) {\n  if (null == t) return [];\n  const [o, i] = t;\n  return o.length > 0 ? n ? [].concat(i, o) : [].concat(o, i) : i;\n}\n\nfunction q(t) {\n  const n = [],\n        o = [];\n  return Object.getOwnPropertyNames(t || {}).forEach(i => {\n    const r = [i, u(t[i])];\n    i === e ? n.push(r) : o.push(r);\n  }), [n, o];\n}\n\nfunction z(t, n) {\n  const o = J(t || {}, n);\n  return null === o ? [] : k(q(o), n.get(e));\n}\n\nexport { S as animationIsReversed, E as extractAnimationNameIfReversed, J as filterAnimationsByUpdatedProperties, k as flattenAndSortAnimations, M as getAnimationConfigForPropertyValue, L as getAnimationFromOverrideOrDecorator, P as getAnimationKeyframesOrPropertyIndexedFrames, b as getAnimationPromiseInstructions, A as getAnimationTarget, q as getHidingAndNonHidingPropertyAnimations, x as getInlineOverride, z as getPropertyAnimations, v as resolveAnimationEndStatus, _ as reverseAnimation, C as reverseAnimationConfig, j as runPropertyAnimations, O as setAnimationConfigOptions, N as setAnimationDuration, $ as setAnimationEasing, I as setAnimationProperty, w as setAnimationStartStatus, R as sizeDimensionKeyframes, B as zeroOutAnimationConfig };","map":{"version":3,"sources":["/home/hmnd/code/poetryslam/web-app/node_modules/@cds/core/internal/motion/utils.js"],"names":["CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX","t","AnimationStatus","n","CLARITY_MOTION_REVERSE_ANIMATION_LABEL","o","CLARITY_MOTION_FALLBACK_EASING","i","CLARITY_MOTION_FALLBACK_DURATION_IN_MS","r","CLARITY_MOTION_ENTER_LEAVE_PROPERTY","e","LogService","s","ClarityMotion","a","u","isCssPropertyName","c","getCssPropertyValue","f","isSuffixedBy","m","getNumericValueFromCssSecondsStyleValue","l","isPrefixedBy","p","removePrefix","h","queryChildFromLightOrShadowDom","g","allPropertiesPass","d","getMillisecondsFromSeconds","y","j","_animations","warn","tagName","toLocaleLowerCase","z","Promise","all","map","get","toString","cdsMotion","M","x","length","O","b","then","v","indexOf","catch","w","getAttribute","active","setAttribute","cdsMotionChange","emit","start","ready","end","S","C","B","$","N","filter","onlyIf","A","target","animate","P","animation","options","removeEventListener","addEventListener","Array","isArray","R","direction","_","JSON","parse","E","slice","L","has","I","duration","easing","Object","prototype","hasOwnProperty","call","height","getBoundingClientRect","width","J","getOwnPropertyNames","forEach","k","concat","q","push","animationIsReversed","extractAnimationNameIfReversed","filterAnimationsByUpdatedProperties","flattenAndSortAnimations","getAnimationConfigForPropertyValue","getAnimationFromOverrideOrDecorator","getAnimationKeyframesOrPropertyIndexedFrames","getAnimationPromiseInstructions","getAnimationTarget","getHidingAndNonHidingPropertyAnimations","getInlineOverride","getPropertyAnimations","resolveAnimationEndStatus","reverseAnimation","reverseAnimationConfig","runPropertyAnimations","setAnimationConfigOptions","setAnimationDuration","setAnimationEasing","setAnimationProperty","setAnimationStartStatus","sizeDimensionKeyframes","zeroOutAnimationConfig"],"mappings":"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","sourcesContent":["import{CLARITY_MOTION_REVERSE_ANIMATION_SUFFIX as t,AnimationStatus as n,CLARITY_MOTION_REVERSE_ANIMATION_LABEL as o,CLARITY_MOTION_FALLBACK_EASING as i,CLARITY_MOTION_FALLBACK_DURATION_IN_MS as r,CLARITY_MOTION_ENTER_LEAVE_PROPERTY as e}from\"./interfaces.js\";import{LogService as s}from\"../services/log.service.js\";import{ClarityMotion as a}from\"./motion.service.js\";import u from\"ramda/es/clone.js\";import{isCssPropertyName as c,getCssPropertyValue as f}from\"../utils/css.js\";import{isSuffixedBy as m,getNumericValueFromCssSecondsStyleValue as l,isPrefixedBy as p,removePrefix as h}from\"../utils/string.js\";import{queryChildFromLightOrShadowDom as g}from\"../utils/dom.js\";import{allPropertiesPass as d}from\"../utils/identity.js\";import{getMillisecondsFromSeconds as y}from\"../utils/math.js\";async function j(t,n){if(!n._animations)return s.warn(n.tagName.toLocaleLowerCase()+\" is trying to animate but no animations are defined.\"),!1;const o=z(n._animations,t);return await Promise.all(o.map((o=>{const[i,r]=o;if(t.get(i)===n[i])return!1;const e=r[n[i].toString()],s=n.cdsMotion,[a,c]=M(e,x(s,i,n[i].toString()));let f=u(c);if(f.length<1)return!1;f=O(a,f,n);const m=b(e,f,n);return Promise.all(m).then((()=>(v(e,n),!0)))}))).then((t=>t.indexOf(!0)>-1)).catch((()=>!1))}function w(t,o){o.getAttribute(\"_cds-animation-status\")!==n.active&&(o.setAttribute(\"_cds-animation-status\",n.active),o.cdsMotionChange.emit(`${t} animation ${n.start}`))}function v(t,o){o.setAttribute(\"_cds-animation-status\",n.ready),o.cdsMotionChange.emit(`${t} animation ${n.end}`)}function O(t,n,o){const i=o.cdsMotion,r=!i||\"off\"===i;return S(t)&&(n=C(n)),r?B(n):$(n=N(n,o),o)}function b(t,n,o){return n.filter((t=>!t.onlyIf||d(o,t.onlyIf))).map((n=>(w(t,o),new Promise((t=>{const i=A(o,n.target).animate(P(n.animation,o),n.options||{}),r=()=>{t(\"animation finished\"),i.removeEventListener(\"finish\",r)};i.addEventListener(\"finish\",r)})))))}function A(t,n){return g(t,n)||t}function P(t,n){return Array.isArray(t)?R(t,n):t}function S(n){return m(n,t)}function C(t){return t.map((t=>(t.options?t.options.direction=o:t.options={direction:o},t)))}function _(t){return t+\"-\"+o}function x(t,n,o){if(!t||!n||void 0===o)return\"\";if(\"on\"===t||\"off\"===t)return\"\";let i;try{i=JSON.parse(t)}catch(t){return\"\"}return i[n]&&i[n][o]||\"\"}function E(n){return S(n)?n.slice(0,-1*t.length):n}function L(t,n){return n&&a.has(E(n))?n:t}function M(t,n){const o=L(t,n);return[o,u(a.get(E(o)))]}function N(t,n){return I(\"duration\",n,t,r,(t=>y(l(t))))}function $(t,n){return I(\"easing\",n,t,i)}function B(t){return t.map((t=>(t.options?(t.options.duration=0,t.options.easing=i):t.options={duration:0,easing:i},t)))}function I(t,n,o,i,r){return o.map((o=>{if(o.options)if(o.options[t]){if(c(o.options[t])){const e=o.options[t];let s=f(e,n);s?r&&(s=r(s)):s=i,o.options[t]=s}}else o.options[t]=i;else{const n={};n[t]=i,o.options=n}return o}))}function R(t,n){return Array.isArray(t)?t.map((t=>{if(Object.prototype.hasOwnProperty.call(t,\"height\")&&p(t?.height?.toString()||\"\",\"from:\")){const o=h(t?.height?.toString()||\"\",\"from:\"),i=g(n,o)||null;t.height=i?i.getBoundingClientRect().height+\"px\":\"auto\"}if(Object.prototype.hasOwnProperty.call(t,\"width\")&&p(t?.width?.toString()||\"\",\"from:\")){const o=h(t?.width?.toString()||\"\",\"from:\"),i=g(n,o)||null;t.width=i?i.getBoundingClientRect().width+\"px\":\"auto\"}return t})):t}function J(t,n){if(null==t)return null;let o=!0;const i={};return Object.getOwnPropertyNames(t).forEach((r=>{n.has(r)&&void 0!==n.get(r)&&(i[r]=u(t[r]),o=!1)})),o?null:i}function k(t,n){if(null==t)return[];const[o,i]=t;return o.length>0?n?[].concat(i,o):[].concat(o,i):i}function q(t){const n=[],o=[];return Object.getOwnPropertyNames(t||{}).forEach((i=>{const r=[i,u(t[i])];i===e?n.push(r):o.push(r)})),[n,o]}function z(t,n){const o=J(t||{},n);return null===o?[]:k(q(o),n.get(e))}export{S as animationIsReversed,E as extractAnimationNameIfReversed,J as filterAnimationsByUpdatedProperties,k as flattenAndSortAnimations,M as getAnimationConfigForPropertyValue,L as getAnimationFromOverrideOrDecorator,P as getAnimationKeyframesOrPropertyIndexedFrames,b as getAnimationPromiseInstructions,A as getAnimationTarget,q as getHidingAndNonHidingPropertyAnimations,x as getInlineOverride,z as getPropertyAnimations,v as resolveAnimationEndStatus,_ as reverseAnimation,C as reverseAnimationConfig,j as runPropertyAnimations,O as setAnimationConfigOptions,N as setAnimationDuration,$ as setAnimationEasing,I as setAnimationProperty,w as setAnimationStartStatus,R as sizeDimensionKeyframes,B as zeroOutAnimationConfig};\n"]},"metadata":{},"sourceType":"module"}