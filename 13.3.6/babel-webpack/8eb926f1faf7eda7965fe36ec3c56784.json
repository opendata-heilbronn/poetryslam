{"ast":null,"code":"import _asyncToGenerator from \"/home/hmnd/code/poetryslam/web-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { initializeKeyListItems as t, setActiveKeyListItem as e, focusElement as s } from \"../utils/focus.js\";\nimport { validKeyNavigationCode as i } from \"../utils/keycodes.js\";\nimport { getFlattenedFocusableItems as o } from \"../utils/traversal.js\";\nimport { getNextKeyListItem as n } from \"./key-navigation.utils.js\";\n\nfunction a(t = {}) {\n  return e => {\n    e.addInitializer(e => {\n      e.keyNavigationListController || (e.keyNavigationListController = new c(e, t));\n    });\n  };\n}\n\nclass c {\n  constructor(t, e = {}) {\n    this.host = t, this.host.addController(this), this.config = {\n      keyListItems: \"keyListItems\",\n      layout: \"horizontal\",\n      manageFocus: !0,\n      manageTabindex: !0,\n      loop: !1,\n      dir: this.host.getAttribute(\"rtl\"),\n      ...e\n    };\n  }\n\n  get listItems() {\n    return this.host[this.config.keyListItems];\n  }\n\n  hostConnected() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.host.updateComplete, _this.initializeTabIndex(), _this.host.addEventListener(\"click\", t => _this.clickItem(t)), _this.host.addEventListener(\"keydown\", t => _this.focusItem(t)), _this.host.shadowRoot?.addEventListener(\"click\", t => _this.clickItem(t)), _this.host.shadowRoot?.addEventListener(\"keydown\", t => _this.focusItem(t));\n    })();\n  }\n\n  initializeTabIndex() {\n    this.config.manageFocus && this.config.manageTabindex && t(this.listItems);\n  }\n\n  clickItem(t) {\n    const e = this.getActiveItem(t);\n    e && this.setActiveItem(t, e);\n  }\n\n  focusItem(t) {\n    if (i(t)) {\n      const e = this.getActiveItem(t);\n\n      if (e) {\n        const {\n          next: s,\n          previous: i\n        } = n(e, Array.from(this.listItems), { ...this.config,\n          code: t.code\n        });\n        s !== i && this.setActiveItem(t, this.listItems[s], this.listItems[i]);\n      }\n    }\n  }\n\n  getActiveItem(t) {\n    return Array.from(this.listItems).find(e => e === t.target.closest(this.listItems[0].tagName.toLocaleLowerCase()) ?? e === t.target);\n  }\n\n  setActiveItem(t, i, n) {\n    if (this.config.manageFocus) {\n      this.config.manageTabindex && e(this.listItems, i);\n      const n = o(i)[0] ?? i;\n      s(n), t.preventDefault();\n    }\n\n    i.dispatchEvent(new CustomEvent(\"cdsKeyChange\", {\n      bubbles: !0,\n      detail: {\n        activeItem: i,\n        previousItem: n,\n        code: t.code,\n        metaKey: t.ctrlKey || t.metaKey,\n        keyListItems: this.config.keyListItems\n      }\n    }));\n  }\n\n}\n\nexport { c as KeyNavigationListController, a as keyNavigationList };","map":{"version":3,"sources":["/home/hmnd/code/poetryslam/web-app/node_modules/@cds/core/internal/controllers/key-navigation-list.controller.js"],"names":["initializeKeyListItems","t","setActiveKeyListItem","e","focusElement","s","validKeyNavigationCode","i","getFlattenedFocusableItems","o","getNextKeyListItem","n","a","addInitializer","keyNavigationListController","c","constructor","host","addController","config","keyListItems","layout","manageFocus","manageTabindex","loop","dir","getAttribute","listItems","hostConnected","updateComplete","initializeTabIndex","addEventListener","clickItem","focusItem","shadowRoot","getActiveItem","setActiveItem","next","previous","Array","from","code","find","target","closest","tagName","toLocaleLowerCase","preventDefault","dispatchEvent","CustomEvent","bubbles","detail","activeItem","previousItem","metaKey","ctrlKey","KeyNavigationListController","keyNavigationList"],"mappings":"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","sourcesContent":["import{initializeKeyListItems as t,setActiveKeyListItem as e,focusElement as s}from\"../utils/focus.js\";import{validKeyNavigationCode as i}from\"../utils/keycodes.js\";import{getFlattenedFocusableItems as o}from\"../utils/traversal.js\";import{getNextKeyListItem as n}from\"./key-navigation.utils.js\";function a(t={}){return e=>{e.addInitializer((e=>{e.keyNavigationListController||(e.keyNavigationListController=new c(e,t))}))}}class c{constructor(t,e={}){this.host=t,this.host.addController(this),this.config={keyListItems:\"keyListItems\",layout:\"horizontal\",manageFocus:!0,manageTabindex:!0,loop:!1,dir:this.host.getAttribute(\"rtl\"),...e}}get listItems(){return this.host[this.config.keyListItems]}async hostConnected(){await this.host.updateComplete,this.initializeTabIndex(),this.host.addEventListener(\"click\",(t=>this.clickItem(t))),this.host.addEventListener(\"keydown\",(t=>this.focusItem(t))),this.host.shadowRoot?.addEventListener(\"click\",(t=>this.clickItem(t))),this.host.shadowRoot?.addEventListener(\"keydown\",(t=>this.focusItem(t)))}initializeTabIndex(){this.config.manageFocus&&this.config.manageTabindex&&t(this.listItems)}clickItem(t){const e=this.getActiveItem(t);e&&this.setActiveItem(t,e)}focusItem(t){if(i(t)){const e=this.getActiveItem(t);if(e){const{next:s,previous:i}=n(e,Array.from(this.listItems),{...this.config,code:t.code});s!==i&&this.setActiveItem(t,this.listItems[s],this.listItems[i])}}}getActiveItem(t){return Array.from(this.listItems).find((e=>e===t.target.closest(this.listItems[0].tagName.toLocaleLowerCase())??e===t.target))}setActiveItem(t,i,n){if(this.config.manageFocus){this.config.manageTabindex&&e(this.listItems,i);const n=o(i)[0]??i;s(n),t.preventDefault()}i.dispatchEvent(new CustomEvent(\"cdsKeyChange\",{bubbles:!0,detail:{activeItem:i,previousItem:n,code:t.code,metaKey:t.ctrlKey||t.metaKey,keyListItems:this.config.keyListItems}}))}}export{c as KeyNavigationListController,a as keyNavigationList};\n"]},"metadata":{},"sourceType":"module"}